    def configurar_unidades_combobox(self):
        """Configura as unidades disponíveis nos comboboxes"""
        unidades_vazao = self.conversor.get_unidades_vazao()
        self.icone_2.clear()
        self.icone_2.addItems(unidades_vazao)
        
        unidades_tempo = ['s', 'min', 'h', 'day']
        self.icone.clear()
        self.icone.addItems(unidades_tempo)

    def atualizar_parametros_entrada(self):
        """Lê os valores de vazão e tempo e inicia a cascata de cálculos."""
        texto_vazao = self.Vazao_2.text().strip().replace(',', '.')
        vazao_valor = float(texto_vazao) if texto_vazao else 0.0
        
        unidade_vazao = self.icone_2.currentText()
        self.vazao = self.conversor.converter_vazao(vazao_valor, unidade_vazao, 'm³/s')
        
        texto_tempo = self.Vazao.text().strip().replace(',', '.')
        tempo_valor = float(texto_tempo) if texto_tempo else 0.0

        self.calculo_diametro_tubulacao()
        self.perdas_carga()
    
    def converter_resultado_para_unidade_usuario(self, valor, tipo):
        """ Converte resultados de cálculos para a unidade preferida do usuário """
        if tipo == 'vazao':
            unidade_alvo = self.icone_2.currentText()
            return self.conversor.converter_vazao(valor, 'm³/s', unidade_alvo)
        elif tipo == 'comprimento':
            unidade_alvo = self.altura_box.currentText() if hasattr(self, 'altura_box') else 'm'
            return self.conversor.converter_comprimento(valor, 'm', unidade_alvo)
        elif tipo == 'potencia':
            unidade_alvo = self.potencia_box.currentText() if hasattr(self, 'potencia_box') else 'kW'
            return self.conversor.converter_potencia(valor, 'kW', unidade_alvo)
        return valor
